---
tags:
  - python
  - Jupyter
alias:
date: 2025-08-30 12:08
---
**内核 (Kernel)** 是Jupyter的计算引擎，是独立于你看到的Notebook文档的后台程序。它负责执行代码、计算结果并**存储所有变量的状态（记忆）**。

## 核心陷阱：状态污染 (State Pollution)

- 内核的记忆只取决于你的**执行历史顺序**，与单元格在文档中的**上下位置无关**。
    
- 反复、无序地执行单元格，会导致内核中存储的变量值与你预期的不符，这是90%的“诡异bug”的来源。
    
- **症状：** 代码看起来没问题，但运行结果就是不对。或者一个之前能运行的单元格突然报错。
    

## 终极解决方案：重启内核

- 当你对当前的状态感到困惑时，不要浪费时间去猜。
    
- **操作:** `菜单栏 -> Kernel -> Restart`
    
- **效果:**
    
    1. 清空后台内核的所有记忆（所有变量、函数定义全部丢失）。
        
    2. Notebook文档本身的代码和输出会保留，但需要从头按顺序重新执行才能恢复状态。
        
- **验证:** 重启后，直接运行一个依赖旧变量的单元格，会立刻得到 `NameError`，证明内核已重置。