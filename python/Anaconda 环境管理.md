---
tags:
  - python
  - 工具
alias:
date: 2025-08-30 13:58
---
这是一份结合了基础命令和深入概念探讨的学习笔记，旨在帮助你完全掌握 Conda 的使用。

## 1. 核心概念：Conda 是什么？

### 1.1 环境：隔离的“工具箱” 🧰

- **核心思想**：Conda 环境 (Environment) 是一个为每个项目创建的、独立的、隔离的沙箱。
    
- **目的**：避免不同项目间的包版本冲突。例如，项目 A 需要 `pandas 1.5`，项目 B 需要 `pandas 2.0`，将它们放在不同环境中可以确保两者都能正常运行。
    

### 1.2 Anaconda vs. Miniconda

- **Anaconda**: 一个“精装全配”的发行版，预装了 Conda、Python 和上百个常用的科学计算包。优点是开箱即用，缺点是体积较大。
    
- **Miniconda**: 一个“轻量核心”版，只包含 Conda 和 Python。用户需要按需安装所有其他包，优点是体积小、环境干净。
    

### 1.3 `base` 环境是什么？

- `base` 环境是 Conda 安装后自带的默认环境。
    
- 对于 **Anaconda**，`base` 环境中预装了所有科学计算包，方便用户快速开始。
    
- **最佳实践**：不要在 `base` 环境中进行项目开发。应为每个新项目创建独立的、干净的环境，以保持 `base` 环境的稳定和项目的可复现性。
    

## 2. 关键区别：为什么选择 Conda？

### 2.1 Conda vs. Python `venv`

|特性|Conda|Python `venv`|
|---|---|---|
|**定位**|强大的**项目总管**|纯粹的 **Python 工具管理员**|
|**管理范围**|Python 包、**非 Python 依赖** (如 CUDA, C++ 库)、**Python 解释器本身**|仅限 Python 包|
|**适用场景**|数据科学、机器学习等依赖复杂底层库的项目|简单的、纯 Python 依赖的项目|

> **核心结论**: 当项目依赖于非 Python 工具（如几乎所有的科学计算库）时，Conda 是更优越、更省心的选择。

### 2.2 Conda vs. `pip`

- [[Python Pip 学习笔记|pip]] 是 Python 官方的**包管理器**，但它**不管理环境** (需要配合 `venv` 使用)。
    
- Conda 是一个**集环境管理和包管理于一体**的工具。
    
- **最佳实践**：
    
    1. **Conda 优先**: 始终先尝试用 `conda install` 安装包。
        
    2. **pip 作为备选**: 仅当 Conda 频道中找不到所需包时，才在**已激活**的 Conda 环境中使用 `pip install` 作为补充。
        
    3. **避免混用**: 不要用 `pip` 更新一个用 `conda` 安装的包，反之亦然。
        

## 3. Conda 常用命令实战

### 3.1 环境管理

- **创建环境**:
    
    ```
    # 创建一个包含指定 Python 版本的环境，需要指定python解释器不然没有，创建的就是一个空架子
    conda create -n <环境名> python=3.9
    ```
    
- **激活环境 (关键步骤！)**:
    
    ```
    # 进入指定环境，之后的所有操作都将在此环境中进行
    conda activate <环境名>
    ```
    
- **退出环境**:
    
    ```
    # 从当前环境返回上一层环境
    conda deactivate
    ```
    
- **查看所有环境**:
    
    ```
    # 列出所有已创建的环境，带 * 的为当前激活环境
    conda env list
    ```
    
- **删除环境**:
    
    ```
    # 彻底删除指定环境及其中的所有包
    conda remove -n <环境名> --all
    ```
    

### 3.2 包管理 (必须在激活环境下执行)

- **安装包**:
    
    ```
    # 可以同时安装多个包
    conda install pandas seaborn
    
    # 安装指定版本的包
    conda install pandas==1.4.4
    ```
    
- **更新包**:
    
    ```
    # 更新指定包到最新版本
    conda update pandas
    
    # 更新或降级到指定版本 (命令与安装相同)
    conda install pandas==1.4.4
    ```
    
- **移除包**:
    
    ```
    conda remove pandas
    ```
    
- **查看已安装的包**:
    
    ```
    conda list
    ```
    

## 4. 深度疑问解答 (Q&A)

### Q1: conda为啥带有python解释器？

- 有两个核心原因：
    
    1. **为了实现其最强大的功能：管理 Python 版本**。 Conda 的核心任务是管理整个项目的环境，而 Python 解释器本身就是这个环境中最关键的一部分。Conda 非常聪明地把 Python 解释器也当作一个可以管理的“包”。正因为如此，你才能用 `conda create -n my-env python=3.8` 这样的命令，轻松创建出一个使用特定 Python 版本的独立环境。如果 Conda 不自己管理解释器，这个强大的功能就无法实现了。
        
    2. **为了方便用户，实现“开箱即用”**。 Conda 希望用户安装后能立刻开始工作。如果还需要用户自己去官网下载和配置 Python 解释器，整个过程就会变得复杂且容易出错。所以，Conda 直接为你准备好了一个，让你省去了很多麻烦。
    
### Q2: 一个项目文件夹对应一个 Conda 环境吗？

- **A3**: 是的，这正是最标准、最推荐的**最佳实践**。坚持“一个项目，一个环境”的原则，可以带来清晰的结构、彻底的依赖隔离以及极大的分享便利性，是专业开发者的重要习惯。
    

### Q3: 有了 Conda，还需要 Python `venv` 吗？可以混用吗？

- **A4**: **不需要，并且绝对不能混用！** Conda 的环境管理功能完全覆盖并超越了 `venv`。在一个已激活的 Conda 环境中再使用 `venv` 会导致路径和包管理严重混乱。正确的做法是：**选择一种环境管理工具并坚持使用它**。对于数据科学领域，Conda 就是最佳选择。


### Q3: pip卸载只能卸载当前软件包么不能卸载软件包所依赖的其他软件包么？

- pip 默认情况下卸载一个包时，**是不会自动卸载这个包所依赖的其他包的**
- `conda` 具备**全局依赖分析**的能力。在卸载一个软件包时，它会先分析当前环境，检查要卸载的包所依赖的其他包是否还被其他包所需要。    

    - 如果一个依赖包**只**被你正在卸载的包使用，`conda` 会将它一起卸载，以保持环境的整洁。
    
    - 如果这个依赖包**还**被当前环境中的其他任何软件包所依赖，`conda` **不会**卸载它。