`sed` (全称 Stream Editor) 是个啥？简单说，它就是个不用打开文件就能帮你改东西的命令行神器！它会一行一行地扫过你的文本，像个小机器人一样，唰唰唰地完成你交代的任务，超级高效！

### 一、上手第一步：命令长啥样？

`sed` 的工作模式很简单：**读一行 -> 干活 -> 输出 -> 下一行**。

它的命令格式就是：`sed [选项] '地址 命令' 文件名`

- **地址：** 可选。就是告诉 `sed` 要在哪几行干活。不写的话，就默认每一行都处理。
    
- **命令：** 你想让 `sed` 干点啥，比如替换、删除之类的。
    

### 二、精准打击：怎么选中我要的行？

地址就是你的“定位器”，告诉 `sed` 该对谁动手。

|类型|语法|意思|
|---|---|---|
|**行号**|`n`|就搞第 `n` 行|
||`$`|就搞最后一行|
|**范围**|`n,m`|从第 `n` 行到第 `m` 行，全搞定|
||`n,$`|从第 `n` 行一直到结尾|
||`n,+x`|从第 `n` 行开始，再往下数 `x` 行|
|**找关键词**|`/关键词/`|哪行有这个“关键词”，就搞哪行|

### 三、核心招式：sed 都能干啥？

这些命令就是 `sed` 的“武功秘籍”。

|命令|语法|解释|
|---|---|---|
|**替换**|`s/旧/新/标志`|**最常用，王牌招式！** 查找并替换。下面的“标志”能让它更强力。|
|**删除**|`d`|不顺眼的行？直接删掉！|
|**打印**|`p`|把想要的行打印出来看看。一般跟 `-n` 选项搭着用。|
|**追加**|`a \文本`|在选中的行**后面**加一行新内容。|
|**插入**|`i \文本`|在选中的行**前面**加一行新内容。|
|**更改**|`c \文本`|把选中的行**整个换成**新内容。|
|**读文件**|`r 文件名`|把另一个文件的内容读进来，加到选中行后面。|
|**写文件**|`w 文件名`|把选中的行存到另一个文件里去。|

#### `s` 命令的“外挂” (Flags for 's')

- `g` (Global): 没它的话，每行只换第一个匹配的。加上它，一行里所有匹配的都给你换掉！
    
- `i` (Ignore Case): 不管大小写，通通匹配。
    
- `N`: 数字，比如 `s/a/b/2` 就是只换第二个 a。
    

### 四、超能力选项 (Power-up Options)

这几个选项能给 `sed` 开挂。

|选项|解释|
|---|---|
|`-n`|**安静点！** 默认情况下 `sed` 会把所有行都打出来，很烦。用了它就只显示你让它处理的行（比如用 `p` 打印的）。|
|`-i`|**直接上手改！** 这个选项会直接修改原文件！**注意：这是个危险操作，没法撤销！** 最好用 `-i.bak` 顺手备个份，不然改错了就只能哭了。|
|`-e`|**一次干几件事！** 让你能同时执行好几个 `sed` 命令。|
|`-r` / `-E`|**正则Pro模式！** 用上它，就能写更简单、更强大的正则表达式了（比如 `+`, `?`, `|

### 五、实战演练 (Let's Do It!)

理论结合实际，试试这几招！

- **替换文件里的某个词:** `sed -i 's/旧词/新词/g' a.txt`
    
- **只看第 5 到 10 行:** `sed -n '5,10p' a.txt`
    
- **删掉所有空行:** `sed '/^$/d' a.txt`
    
- **在所有包含 "error" 的行后面加个标记:** `sed '/error/a \快看这行有问题！' log.txt`
    
- **删掉所有注释行和空行:** `sed -e '/^#/d' -e '/^$/d' config.conf`
    

> `sed` 的玩法核心就是“过滤”和“转换”。别怕它，大胆去试！它就像一个管道工，在数据的管道里帮你整理文本。用多了你就会发现它的魔力所在，超爽的！