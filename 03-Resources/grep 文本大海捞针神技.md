想象一下，你是个侦探，要在一座堆满文件的图书馆里找到包含特定线索“芝麻开门”的纸条。`grep` 就是你的超能力助手，你只要喊一声“芝麻开门”，它就能瞬间帮你把所有相关的纸条全找出来，甚至还能告诉你它们在哪一页！

`grep` (Global search for Regular Expression and Print out) 的核心就一个字：**搜**！

### 一、基本公式 · 召唤神技

`grep` 的咒语格式很简单：

**`grep [选项] "要找啥" 从哪找`**

- **`[选项]`**: 给你的搜索加各种 buff，比如忽略大小写、反向查找等。
    
- **`"要找啥"`**: 你要找的关键词或正则表达式（你的“线索”）。
    
- **`从哪找`**: 文件名。如果省略，它就会处理从管道 (`|`) 流过来的数据。
    

### 二、核心选项 · buff 加满

这些选项是 `grep` 的精髓，让你的搜索骚操作飞起！

|   |   |   |
|---|---|---|
|**选项**|**别名/外号**|**效果**|
|`-i`|**无视大小写**|"apple" 和 "Apple" 都能搜到，佛系搜索。|
|`-v`|**反向查找**|像个叛逆少年，专找**不包含**关键词的行。|
|`-r`|**掘地三尺**|递归搜索，会把文件夹里所有子文件夹都翻个底朝天。|
|`-n`|**显示行号**|强迫症福音，告诉你匹配的行在第几行。|
|`-c`|**只报数**|不关心内容，就告诉你总共找到了几行。|
|`-w`|**全词匹配**|只找独立的单词。搜 `is` 不会匹配到 `this`。|
|`-l`|**只报文件名**|懒人模式，不显示匹配内容，直接告诉你哪个文件里有。|
|`-E`|**正则 Pro**|开启扩展正则模式，让你能用更骚的正则语法 (`+`, `?`, `|
|`-A/B/C n`|**显示上下文**|`A`=After, `B`=Before, `C`=Context。显示匹配行和它的前/后/前后 n 行邻居。|

### 三、实战心法 · 场景演练

光说不练假把式，来看 `grep` 在真实世界里怎么大显神通！

- **基本查找：在文件 `a.log` 里找所有 "error" 的行**
    
    ```
    grep "error" a.log
    ```
    
- **无视大小写，并显示行号**
    
    ```
    grep -in "error" a.log
    ```
    
- **掘地三尺：在当前项目所有文件里找 "TODO"**
    
    ```
    grep -r "TODO" .
    ```
    
    _(这里的 `.` 代表当前目录)_
    
- **反向查找：显示 `config.txt` 中所有不是注释的行**
    
    ```
    grep -v "^#" config.txt
    ```
    
- **管道连招：查看 `nginx` 进程是否在运行**
    
    ```
    ps aux | grep "nginx"
    ```
    
    _(这是 `grep` 最最最常见的用法！把其他命令的输出结果作为 `grep` 的输入)_
    
- **统计词频：计算 `report.txt` 里有多少个 "success"**
    
    ```
    grep -c "success" report.txt
    ```
    
- **看上下文：找出错误日志和它前后的2行，方便定位问题**
    
    ```
    grep -C 2 "FATAL" system.log
    ```
    

> `grep` 是你在 Linux 命令行里最忠实的朋友。它简单、直接、暴力，是你处理海量文本数据时最有力的武器。把它和管道 (`|`) 结合起来，你就能构建出无数强大的单行命令！